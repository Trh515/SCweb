<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <link href="~/js/layui-v2.4.5/layui/css/layui.css" rel="stylesheet" />
</head>

<body>
    <table class="layui-table" id="test" lay-filter="test"></table>
    <table class="layui-table" id="test1" lay-filter="test1"></table>
    <script src="~/Scripts/jquery-3.3.1.js"></script>
    <script src="~/js/layui-v2.4.5/layui/layui.js"></script>
    <script src="~/js/DataTableExtend.js"></script>
    <script src="~/js/Js扩展.js"></script>
    <script type="text/javascript">

        $(function () {
            Load();
        });
        function Load() {
            layui.use(['util', 'table', 'layer'], function () {
                var table = layui.table;
                table.render({
                    elem: '#test'
                    , url: '/CMTdy/CMTindex/',
                    toolbar: '#toolbarDemo',
                    height: 470,
                    where: {
                        spdm: $("#spdm").val()
                    },
                    page: true,
                    even: true,
                    cols: [[
                        { type: 'checkbox', fixed: true },
                        { field: 'BYZD8', title: '年份', width: 65 }
                        , { field: 'JJMC', title: '季节', width: 65 },
                        //{ field: 'SXMC', title: '波段', width: 65 },
                        { field: 'GCMC', title: '加工工厂', width: 100 },
                        { field: 'HTH', title: '合同编号', width: 120 },
                        { field: 'SPDM', title: '款式编号', width: 120 },
                        { field: 'ZZRQ6', title: '合同签订时间', width: 115 },
                        {
                            field: 'JHRQ', title: '合同货期时间', width: 115
                        },
                        { field: 'RKRQ', title: '入库时间', width: 115 },
                        { field: 'HTSL', title: '合同数量', width: 115 },
                        { field: 'HTJE', title: '合同金额', width: 115 },
                        { field: 'JHSL', title: '正品入库数量', width: 115 },
                        { field: 'JHSL1', title: '次品入库数量', width: 115 },
                        { field: 'CPSL', title: '裁片入库数量', width: 115 },
                        {
                            field: 'Money_1', title: '结算金额', width: 100, templet: function (d) {

                                if (d.Money_1 == 0) {
                                    return "";
                                }
                                else {
                                    return d.Money_1
                                }
                            }
                        },
                        //{
                        //    field: 'TJzt', title: '提交状态', width: 135, style: "color: #EA0000; font-weight:bold;"
                        //    , templet: function (d) {
                        //        if (d.TJzt == 1) {
                        //            return "已提交";
                        //        }
                        //        //else if (d.TJzt == 2) {
                        //        //    return "已提交尾款";
                        //        //}
                        //        //else if (d.TJzt == 3) {
                        //        //    return "已提交报账";
                        //        //}
                        //        else {
                        //            return "";
                        //        }
                        //    }
                        //},
                        //{
                        //    field: 'SHzt', title: '付款状态', width: 135, style: "color: #EA0000; font-weight:bold;"
                        //    , templet: function (d) {
                        //        if (d.SHzt == 1) {
                        //            return "已付金额";
                        //        }
                        //        //else if (d.FKzt == 2) {
                        //        //    return "已付尾款";
                        //        //}
                        //        //else if (d.FKzt == 3) {
                        //        //    return "已付总金额";
                        //        //}
                        //        else {
                        //            return "";
                        //        }
                        //    }
                        //},
                        { field: 'SHzt2', title: '审核状态', width: 115, hide: true },
                        { field: 'Remark', title: '备注', width: 115, hide: true },
                        { field: 'ZT', title: '是否开票', hide: true },
                        //{
                        //    fixed: 'right', title: '操作', align: 'center', width: 165,
                        //    templet: function (d) {

                        //        return ' <button class="layui-btn layui-btn-warm layui-btn-xs" lay-event="sh1">付款</button>';


                        //    }
                        //}
                    ]],
                    limit: 1000,
                    limits: [1000],
                    done: function (res, curr, count) {
                        $(".layui-table th").css("font-weight", "bold");
                        LayUIDataTable.SetJqueryObj($);
                        var currentRowDataList = LayUIDataTable.ParseDataTable(function (index, currentData, rowData) {
                            //console.log("当前页数据条数:" + currentRowDataList.length)
                            //console.log("当前行索引：" + index);
                            //console.log("触发的当前行单元格：" + currentData);
                            //console.log("当前行数据：" + JSON.stringify(rowData));
                            //var msg = '<div style="text-align: left"> 【当前页数据条数】'
                            //    + currentRowDataList.length + '<br/>【当前行索引】' + index + '<br/>【触发的当前行单元格】'
                            //    + currentData + '<br/>【当前行数据】' + JSON.stringify(rowData) + '</div>';
                            //layer.msg(msg)
                        })
                        $.each(currentRowDataList, function (index, obj) {
                            /*
                               * 通过遍历表格集合，拿到每行数据对象obj，通过obj["列名"]["row"]可以拿到行对象，obj["列名"]["cell"]可以拿到单元格对象
                               * */
                            switch (obj["SHzt"].value) {
                                case "已付定金额":
                                    $("[data-field='Money_2']").css('display', 'none');
                                    $("[data-field='Money_3']").css('display', 'none');
                                    break;
                                //case "已付60%中期款":
                                //    obj['YDJH']["row"].css("background-color", "#96FED1");
                                //    obj["YDJH"]["cell"].css("font-weight", "bold");
                                //    break;
                                //case "已付尾款":
                                //    obj['YDJH']["row"].css("background-color", "#E6CAFF");
                                //    obj["YDJH"]["cell"].css("font-weight", "bold");
                                //    break;
                            }
                        });
                    }
                });
            });
        };
    </script>
</body>
</html>